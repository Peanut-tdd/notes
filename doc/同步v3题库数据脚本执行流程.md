## 同步v3题库数据脚本执行流程

**项目：xiaoti_cms**

**分支：import_prod_question**

### 分表汇总（xiaoti_rdd.xt_question_tag_rdd汇总表）

建表：

```Bash
CREATE TABLE `xt_question_tag_rdd` (
  `rdd_id` bigint(21) unsigned NOT NULL AUTO_INCREMENT COMMENT '试题和标签关系表id',
  `subject_id` tinyint(4) unsigned NOT NULL DEFAULT '0' COMMENT '学科id',
  `question_uuid` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '试题uuid',
  `position` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '打在题上的位置,A(a选项),B(b选项),C(C选项),D(D选项),QUESTION(题上),BLANK_1(第一个空),BLANK_2(第二个空),BLANK_3(第三个空)',
  `tag_type_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '标签类型id',
  `tag_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '标签id',
  `pr_tag_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '父标签id',
  `create_user` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '创建人',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_user` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最后修改人',
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '最后修改时间',
  `is_delete` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '是否删除,0未删除,1已删除',
  `autoutime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`rdd_id`) USING BTREE,
  KEY `question_uuid` (`question_uuid`) USING BTREE,
  KEY `tag_id,question_uuid` (`tag_id`,`question_uuid`) USING BTREE,
  KEY `subject_to_tag` (`subject_id`,`tag_type_id`,`is_delete`,`tag_id`,`question_uuid`) USING BTREE,
  KEY `is_delete,question_uuid` (`is_delete`,`question_uuid`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='试题和标签关系表';
```

数据汇总初始化：

```SQL
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_0;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_1;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_2;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_3;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_4;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_5;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_6;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_7;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_8;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_9;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_a;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_b;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_c;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_d;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_e;
INSERT INTO xt_question_tag_rdd (subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime)
SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user, created, update_user, updated, is_delete, autoutime
FROM xt_question_tag_rdd_f;
```

### **1、执行写入数据库脚本**

#### 1.1建copy表

```Bash
CREATE TABLE `xt_question_tag_rdd_0_copy1` (
  `rdd_id` bigint(21) unsigned NOT NULL AUTO_INCREMENT COMMENT '试题和标签关系表id',
  `subject_id` tinyint(4) unsigned NOT NULL DEFAULT '0' COMMENT '学科id',
  `question_uuid` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '试题uuid',
  `position` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '打在题上的位置,A(a选项),B(b选项),C(C选项),D(D选项),QUESTION(题上),BLANK_1(第一个空),BLANK_2(第二个空),BLANK_3(第三个空)',
  `tag_type_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '标签类型id',
  `tag_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '标签id',
  `pr_tag_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '父标签id',
  `create_user` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '创建人',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_user` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最后修改人',
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '最后修改时间',
  `is_delete` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '是否删除,0未删除,1已删除',
  `autoutime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`rdd_id`) USING BTREE,
  KEY `question_uuid` (`question_uuid`) USING BTREE,
  KEY `tag_id` (`tag_id`) USING BTREE,
  KEY `subject_to_tag` (`subject_id`,`tag_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='试题和标签关系表';
create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_1_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_2_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_3_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_4_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_5_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_6_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_7_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_8_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_9_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_a_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_b_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_c_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_d_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_e_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;

create table if not exists `xiaoti_rdd`.`xt_question_tag_rdd_f_copy1`  like `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;
```

清空需要保留的数据关系表：

```Go
truncate `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_1_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_2_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_3_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_4_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_5_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_6_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_7_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_8_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_9_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_a_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_b_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_c_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_d_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_e_copy1`;
truncate `xiaoti_rdd`.`xt_question_tag_rdd_f_copy1`;

truncate `xiaoti_question`.`xt_question_0_copy1`;
truncate `xiaoti_question`.`xt_question_1_copy1`;
truncate `xiaoti_question`.`xt_question_2_copy1`;
truncate `xiaoti_question`.`xt_question_3_copy1`;
truncate `xiaoti_question`.`xt_question_4_copy1`;
truncate `xiaoti_question`.`xt_question_5_copy1`;
truncate `xiaoti_question`.`xt_question_6_copy1`;
truncate `xiaoti_question`.`xt_question_7_copy1`;
truncate `xiaoti_question`.`xt_question_8_copy1`;
truncate `xiaoti_question`.`xt_question_9_copy1`;
truncate `xiaoti_question`.`xt_question_a_copy1`;
truncate `xiaoti_question`.`xt_question_b_copy1`;
truncate `xiaoti_question`.`xt_question_c_copy1`;
truncate `xiaoti_question`.`xt_question_d_copy1`;
truncate `xiaoti_question`.`xt_question_e_copy1`;
truncate `xiaoti_question`.`xt_question_f_copy1`;

drop table `xiaoti_question`.`xt_question_0_copy2`;
drop table `xiaoti_question`.`xt_question_1_copy2`;
drop table `xiaoti_question`.`xt_question_2_copy2`;
drop table `xiaoti_question`.`xt_question_3_copy2`;
drop table `xiaoti_question`.`xt_question_4_copy2`;
drop table `xiaoti_question`.`xt_question_5_copy2`;
drop table `xiaoti_question`.`xt_question_6_copy2`;
drop table `xiaoti_question`.`xt_question_7_copy2`;
drop table `xiaoti_question`.`xt_question_8_copy2`;
drop table `xiaoti_question`.`xt_question_9_copy2`;
drop table `xiaoti_question`.`xt_question_a_copy2`;
drop table `xiaoti_question`.`xt_question_b_copy2`;
drop table `xiaoti_question`.`xt_question_c_copy2`;
drop table `xiaoti_question`.`xt_question_d_copy2`;
drop table `xiaoti_question`.`xt_question_e_copy2`;
drop table `xiaoti_question`.`xt_question_f_copy2`;
```

试题和标签关系表，保留的数据存储表

```Go
CREATE TABLE `xiaoti_rdd`.`xt_question_tag_rdd_retain` (
  `rdd_id` bigint(21) unsigned NOT NULL AUTO_INCREMENT COMMENT '试题和标签关系表id',
  `subject_id` tinyint(4) unsigned NOT NULL DEFAULT '0' COMMENT '学科id',
  `question_uuid` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '试题uuid',
  `position` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '打在题上的位置,A(a选项),B(b选项),C(C选项),D(D选项),QUESTION(题上),BLANK_1(第一个空),BLANK_2(第二个空),BLANK_3(第三个空)',
  `tag_type_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '标签类型id',
  `tag_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '标签id',
  `pr_tag_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '父标签id',
  `create_user` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '创建人',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_user` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最后修改人',
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '最后修改时间',
  `is_delete` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '是否删除,0未删除,1已删除',
  `autoutime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`rdd_id`),
  KEY `question_uuid` (`question_uuid`),
  KEY `tag_id` (`tag_id`),
  KEY `subject_to_tag` (`subject_id`,`tag_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=DYNAMIC COMMENT='试题和标签关系表';
CREATE TABLE `xt_question_0_copy1` (
  `question_uuid` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '试题uuid',
  `question_title_uuid` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '题冒题uuid',
  `subject_id` tinyint(4) unsigned NOT NULL DEFAULT '0' COMMENT '学科id',
  `serial_number` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '自定义编号',
  `q_forms` tinyint(1) NOT NULL DEFAULT '0' COMMENT '题目形式,1主观题,2客观题',
  `question_type` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '试题类型,1单选题,2多选题,3填空题',
  `show_type` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '展现形式,100单选默认,101多选默认,102填空默认,103正误默认,104听音默认选项,105听音跟读,106听音图片选项,107读目标语言,108绘本跟读',
  `difficulty` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '难度,1,2,3,4,5,6,7,8,9',
  `translation_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '译文id,如果是0表示没有译文',
  `estimates_time` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '预估时间',
  `score` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '学分',
 # `cocos_data` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT '' COMMENT '益智游戏资源',
  `priority` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '优先级',
  `is_delete` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '是否删除,0未删除,1已删除',
  `create_user` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '创建人',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_user` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最后修改人',
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '最后修改时间',
  `client_ip` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最后操作者ip',
  `autoutime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`question_uuid`),
  KEY `question_title_uuid` (`question_title_uuid`),
  KEY `subject_id` (`subject_id`),
  KEY `serial_number` (`serial_number`),
  KEY `created` (`created`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=DYNAMIC COMMENT='试题表';
create table if not exists `xiaoti_question`.`xt_question_1_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_2_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_3_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_4_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_5_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_6_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_7_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_8_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_9_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_a_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_b_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_c_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_d_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_e_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
create table if not exists `xiaoti_question`.`xt_question_f_copy1`  like `xiaoti_question`.`xt_question_0_copy1`;
```

#### **1.2执行脚本命令**

```Bash
入参学科id，2：数学，4：物理，5：化学，6：生物

nohup php think V3QuestionExport 2  >> /tmp/V3QuestionExport2.log 2>&1 &

nohup php think V3QuestionExport 4  >> /tmp/V3QuestionExport4.log 2>&1 &

nohup php think V3QuestionExport 5  >> /tmp/V3QuestionExport5.log 2>&1 &

nohup php think V3QuestionExport 6  >> /tmp/V3QuestionExport6.log 2>&1 &
```

#### 1.3查看数据存放位置

```Bash
题目：xiaoti_question.xt_question_X_copy1 16个分表


题目与知识点绑定关系：xiaoti_rdd.xt_question_tag_rdd_X_copy1  16个分表
```

### **2、执行同步删除数据至算法脚本（先执行完1再执行此操作）**

```Bash
入参学科id，2：数学，4：物理，5：化学，6：生物

nohup php think SyncV3Question 2  >> /tmp/SyncV3Question2.log 2>&1 &

nohup php think SyncV3Question 4  >> /tmp/SyncV3Question4.log 2>&1 &

nohup php think SyncV3Question 5  >> /tmp/SyncV3Question5.log 2>&1 &

nohup php think SyncV3Question 6  >> /tmp/SyncV3Question6.log 2>&1 &
```

### **3、查看消费kakfa数据情况**

```Bash
#topic
data_transfer 

#查看命令
/usr/local/kafka/bin/kafka-console-consumer.sh --bootstrap-server   kafka.dev.myyixue.com:9092  --topic data_transfer --from-beginning
```

![img](https://b0mzss973k.feishu.cn/space/api/box/stream/download/asynccode/?code=YjkwM2FjNzM0YWJkNzA4NTc0YjlmMjU4ZjVlNDVlZGZfUjdRQ2FJOHZHY0tRM25yVmt0WWc3Y0pKQmE3VzJNajhfVG9rZW46WVByVmJWd1JKb3I1Y294Q1B3SmNxOFZJbnhmXzE3MzA1MjkxMzE6MTczMDUzMjczMV9WNA)

### **5、check是否删除成功**

```Bash
http://algo-ale-center-admin.dw.dev.myyixue.com/#/irs/irs-cms/irs-sync-data-list
账号：tiandongdong
密码：123456
```

![img](https://b0mzss973k.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWI3MzUzYTQ0NTQyZjYwYjQ1MWU0OWEwMDI1MWUzYjhfY0lQZndpZmRKOHFrMU1FT01HWTBGcDYxSEdjendvVFVfVG9rZW46T20zeWJpYzhUbzlMdk94NWp0bWN3dGx0bmdnXzE3MzA1MjkxMzE6MTczMDUzMjczMV9WNA)

张小兰处理：

```Go
ALTER TABLE `xiaoti_question`.`xt_question_0` RENAME TO `xiaoti_question`.`xt_question_0_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_1` RENAME TO `xiaoti_question`.`xt_question_1_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_2` RENAME TO `xiaoti_question`.`xt_question_2_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_3` RENAME TO `xiaoti_question`.`xt_question_3_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_4` RENAME TO `xiaoti_question`.`xt_question_4_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_5` RENAME TO `xiaoti_question`.`xt_question_5_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_6` RENAME TO `xiaoti_question`.`xt_question_6_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_7` RENAME TO `xiaoti_question`.`xt_question_7_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_8` RENAME TO `xiaoti_question`.`xt_question_8_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_9` RENAME TO `xiaoti_question`.`xt_question_9_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_a` RENAME TO `xiaoti_question`.`xt_question_a_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_b` RENAME TO `xiaoti_question`.`xt_question_b_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_c` RENAME TO `xiaoti_question`.`xt_question_c_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_d` RENAME TO `xiaoti_question`.`xt_question_d_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_e` RENAME TO `xiaoti_question`.`xt_question_e_bak`;
ALTER TABLE `xiaoti_question`.`xt_question_f` RENAME TO `xiaoti_question`.`xt_question_f_bak`;


ALTER TABLE `xiaoti_question`.`xt_question_0_bak` RENAME TO `xiaoti_question`.`xt_question_0`;
ALTER TABLE `xiaoti_question`.`xt_question_1_bak` RENAME TO `xiaoti_question`.`xt_question_1`;
ALTER TABLE `xiaoti_question`.`xt_question_2_bak` RENAME TO `xiaoti_question`.`xt_question_2`;
ALTER TABLE `xiaoti_question`.`xt_question_3_bak` RENAME TO `xiaoti_question`.`xt_question_3`;
ALTER TABLE `xiaoti_question`.`xt_question_4_bak` RENAME TO `xiaoti_question`.`xt_question_4`;
ALTER TABLE `xiaoti_question`.`xt_question_5_bak` RENAME TO `xiaoti_question`.`xt_question_5`;
ALTER TABLE `xiaoti_question`.`xt_question_6_bak` RENAME TO `xiaoti_question`.`xt_question_6`;
ALTER TABLE `xiaoti_question`.`xt_question_7_bak` RENAME TO `xiaoti_question`.`xt_question_7`;
ALTER TABLE `xiaoti_question`.`xt_question_8_bak` RENAME TO `xiaoti_question`.`xt_question_8`;
ALTER TABLE `xiaoti_question`.`xt_question_9_bak` RENAME TO `xiaoti_question`.`xt_question_9`;
ALTER TABLE `xiaoti_question`.`xt_question_a_bak` RENAME TO `xiaoti_question`.`xt_question_a`;
ALTER TABLE `xiaoti_question`.`xt_question_b_bak` RENAME TO `xiaoti_question`.`xt_question_b`;
ALTER TABLE `xiaoti_question`.`xt_question_c_bak` RENAME TO `xiaoti_question`.`xt_question_c`;
ALTER TABLE `xiaoti_question`.`xt_question_d_bak` RENAME TO `xiaoti_question`.`xt_question_d`;
ALTER TABLE `xiaoti_question`.`xt_question_e_bak` RENAME TO `xiaoti_question`.`xt_question_e`;
ALTER TABLE `xiaoti_question`.`xt_question_f_bak` RENAME TO `xiaoti_question`.`xt_question_f`;


ALTER TABLE `xiaoti_question`.`xt_question_0_copy1` RENAME TO `xiaoti_question`.`xt_question_0`;
ALTER TABLE `xiaoti_question`.`xt_question_1_copy1` RENAME TO `xiaoti_question`.`xt_question_1`;
ALTER TABLE `xiaoti_question`.`xt_question_2_copy1` RENAME TO `xiaoti_question`.`xt_question_2`;
ALTER TABLE `xiaoti_question`.`xt_question_3_copy1` RENAME TO `xiaoti_question`.`xt_question_3`;
ALTER TABLE `xiaoti_question`.`xt_question_4_copy1` RENAME TO `xiaoti_question`.`xt_question_4`;
ALTER TABLE `xiaoti_question`.`xt_question_5_copy1` RENAME TO `xiaoti_question`.`xt_question_5`;
ALTER TABLE `xiaoti_question`.`xt_question_6_copy1` RENAME TO `xiaoti_question`.`xt_question_6`;
ALTER TABLE `xiaoti_question`.`xt_question_7_copy1` RENAME TO `xiaoti_question`.`xt_question_7`;
ALTER TABLE `xiaoti_question`.`xt_question_8_copy1` RENAME TO `xiaoti_question`.`xt_question_8`;
ALTER TABLE `xiaoti_question`.`xt_question_9_copy1` RENAME TO `xiaoti_question`.`xt_question_9`;
ALTER TABLE `xiaoti_question`.`xt_question_a_copy1` RENAME TO `xiaoti_question`.`xt_question_a`;
ALTER TABLE `xiaoti_question`.`xt_question_b_copy1` RENAME TO `xiaoti_question`.`xt_question_b`;
ALTER TABLE `xiaoti_question`.`xt_question_c_copy1` RENAME TO `xiaoti_question`.`xt_question_c`;
ALTER TABLE `xiaoti_question`.`xt_question_d_copy1` RENAME TO `xiaoti_question`.`xt_question_d`;
ALTER TABLE `xiaoti_question`.`xt_question_e_copy1` RENAME TO `xiaoti_question`.`xt_question_e`;
ALTER TABLE `xiaoti_question`.`xt_question_f_copy1` RENAME TO `xiaoti_question`.`xt_question_f`;


ALTER TABLE `xiaoti_question`.`xt_question_0` RENAME TO `xiaoti_question`.`xt_question_0_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_1` RENAME TO `xiaoti_question`.`xt_question_1_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_2` RENAME TO `xiaoti_question`.`xt_question_2_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_3` RENAME TO `xiaoti_question`.`xt_question_3_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_4` RENAME TO `xiaoti_question`.`xt_question_4_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_5` RENAME TO `xiaoti_question`.`xt_question_5_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_6` RENAME TO `xiaoti_question`.`xt_question_6_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_7` RENAME TO `xiaoti_question`.`xt_question_7_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_8` RENAME TO `xiaoti_question`.`xt_question_8_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_9` RENAME TO `xiaoti_question`.`xt_question_9_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_a` RENAME TO `xiaoti_question`.`xt_question_a_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_b` RENAME TO `xiaoti_question`.`xt_question_b_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_c` RENAME TO `xiaoti_question`.`xt_question_c_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_d` RENAME TO `xiaoti_question`.`xt_question_d_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_e` RENAME TO `xiaoti_question`.`xt_question_e_copy1`;
ALTER TABLE `xiaoti_question`.`xt_question_f` RENAME TO `xiaoti_question`.`xt_question_f_copy1`;
```

数据验证sql:

```Go
#数学
SELECT * FROM `xiaoti_rdd`.`xt_question_tag_rdd_retain` WHERE question_uuid in
(
SELECT DISTINCT question_uuid FROM `xiaoti_rdd`.`xt_question_tag_rdd_retain`  WHERE tag_id = 42662 AND tag_type_id = 1 AND is_delete = 0
) 
AND tag_id IN(441,442,447) 
AND is_delete = 0


SELECT * FROM `xiaoti_rdd`.`xt_question_tag_rdd` WHERE question_uuid in
(
SELECT DISTINCT question_uuid FROM `xiaoti_rdd`.`xt_question_tag_rdd`  WHERE tag_id = 42662 AND tag_type_id = 1 AND is_delete = 0
) 
AND tag_id IN(441,442,447) 
AND is_delete = 0


#物理
SELECT * FROM `xiaoti_rdd`.`xt_question_tag_rdd_retain` WHERE question_uuid in
(
SELECT DISTINCT question_uuid FROM `xiaoti_rdd`.`xt_question_tag_rdd_retain`  WHERE tag_id = 34274 AND tag_type_id = 1 AND is_delete = 0
) 
AND tag_id IN(457,458,463) 
AND is_delete = 0

SELECT * FROM `xiaoti_rdd`.`xt_question_tag_rdd` WHERE question_uuid in
(
SELECT DISTINCT question_uuid FROM `xiaoti_rdd`.`xt_question_tag_rdd`  WHERE tag_id = 34274 AND tag_type_id = 1 AND is_delete = 0
) 
AND tag_id IN(457,458,463) 
AND is_delete = 0

#化学
SELECT * FROM `xiaoti_rdd`.`xt_question_tag_rdd_retain` WHERE question_uuid in
(
SELECT DISTINCT question_uuid FROM `xiaoti_rdd`.`xt_question_tag_rdd_retain`  WHERE tag_id = 39087 AND tag_type_id = 1 AND is_delete = 0
) 
AND tag_id IN(465,466,471) 
AND is_delete = 0

SELECT * FROM `xiaoti_rdd`.`xt_question_tag_rdd` WHERE question_uuid in
(
SELECT DISTINCT question_uuid FROM `xiaoti_rdd`.`xt_question_tag_rdd`  WHERE tag_id = 39087 AND tag_type_id = 1 AND is_delete = 0
) 
AND tag_id IN(465,466,471) 
AND is_delete = 0
```

备份`xiaoti_rdd`.`xt_question_tag_rdd_*` 

```Go
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_0` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_0_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_1_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_2` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_2_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_3` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_3_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_4` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_4_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_5` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_5_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_6` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_6_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_7` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_7_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_8` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_8_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_9` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_9_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_a` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_a_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_b` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_b_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_c` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_c_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_d` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_d_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_e` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_e_bak`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_f` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_f_bak`; 


ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_0_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_0`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_1_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_2_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_2`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_3_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_3`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_4_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_4`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_5_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_5`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_6_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_6`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_7_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_7`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_8_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_8`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_9_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_9`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_a_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_a`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_b_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_b`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_c_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_c`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_d_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_d`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_e_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_e`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_f_bak` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_f`;

ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_0`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_1_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_2_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_2`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_3_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_3`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_4_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_4`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_5_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_5`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_6_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_6`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_7_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_7`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_8_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_8`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_9_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_9`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_a_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_a`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_b_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_b`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_c_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_c`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_d_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_d`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_e_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_e`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_f_copy1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_f`;

ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_0` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_0_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_1` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_1_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_2` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_2_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_3` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_3_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_4` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_4_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_5` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_5_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_6` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_6_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_7` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_7_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_8` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_8_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_9` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_9_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_a` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_a_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_b` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_b_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_c` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_c_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_d` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_d_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_e` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_e_copy1`;
ALTER TABLE `xiaoti_rdd`.`xt_question_tag_rdd_f` RENAME TO `xiaoti_rdd`.`xt_question_tag_rdd_f_copy1`;
`xiaoti_rdd`.`xt_question_tag_rdd_retain`：理科V3题目
`xiaoti_rdd`.`xt_question_tag_rdd_retain_cnen`：英语保留的题目
SELECT DISTINCT subject_id FROM `xiaoti_rdd`.`xt_question_tag_rdd`:全学科关系数据（1，2，3，4，5）
`xiaoti_rdd`.`xt_question_tag_rdd_*_bak`：原始全学科关系数据备份表
`xiaoti_rdd`.`xt_question_tag_rdd_*`：理科、语文关系数据表（英语没写）
INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_0`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_0_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_1`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_1_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_2`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_2_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_3`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_3_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_4`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_4_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_5`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_5_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_6`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_6_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_7`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_7_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_8`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_8_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_9`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_9_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_a`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_a_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_b`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_b_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_c`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_c_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_d`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_d_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_e`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_e_en_copy1`;

INSERT INTO `xiaoti_rdd`.`xt_question_tag_rdd_f`(subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete) SELECT subject_id, question_uuid, position, tag_type_id, tag_id, pr_tag_id, create_user,created,update_user,updated,is_delete FROM  `xiaoti_rdd`.`xt_question_tag_rdd_f_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_0` SELECT * FROM `xiaoti_question`.`xt_question_0_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_1` SELECT * FROM `xiaoti_question`.`xt_question_1_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_2` SELECT * FROM `xiaoti_question`.`xt_question_2_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_3` SELECT * FROM `xiaoti_question`.`xt_question_3_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_4` SELECT * FROM `xiaoti_question`.`xt_question_4_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_5` SELECT * FROM `xiaoti_question`.`xt_question_5_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_6` SELECT * FROM `xiaoti_question`.`xt_question_6_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_7` SELECT * FROM `xiaoti_question`.`xt_question_7_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_8` SELECT * FROM `xiaoti_question`.`xt_question_8_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_9` SELECT * FROM `xiaoti_question`.`xt_question_9_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_a` SELECT * FROM `xiaoti_question`.`xt_question_a_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_b` SELECT * FROM `xiaoti_question`.`xt_question_b_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_c` SELECT * FROM `xiaoti_question`.`xt_question_c_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_d` SELECT * FROM `xiaoti_question`.`xt_question_d_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_e` SELECT * FROM `xiaoti_question`.`xt_question_e_en_copy1`;
INSERT INTO `xiaoti_question`.`xt_question_f` SELECT * FROM `xiaoti_question`.`xt_question_f_en_copy1`;
```

# V1英语题库处理

git:http://gitlab.yx/mxpad/question_dingding_import/tree/master/v1Question

分支：master

执行命令：cd  v1Question

v1英语小题：nohup php  V1Export.php  1 t  >> /tmp/v1_en_question.log 2>&1 &

v1英语题冒：nohup php  V1Export.php  1 tm  >> /tmp/v1_en_question_title.log 2>&1 &

v1语文小题：nohup php  V1Export.php  3 t  >> /tmp/v1_cn_question.log 2>&1 &

v1语文题冒：nohup php  V1Export.php  3 tm  >> /tmp/v1_cn_question_title.log 2>&1 &